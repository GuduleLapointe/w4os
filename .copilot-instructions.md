# W4OS Project Architecture Rules

## Core Principles
The project is organized in 3 parts
- **engine** is a framework-agnostic standalone library, it knows nothing about other component
- **helpers/** is framework-agnostic standalone component, it uses **engine** library.
- **wordpress/** contains WordPress-specific integration code, it uses **helpers** and **engine** and only processes the integration with WordPress.
- Each component has only knowledge of its own prcesses and the component it imports
- E.g. No WordPress elements or naming in engine or helpers, no helpers elements or naming in engine

## Data Flow Rules
- Use generic session variables (`wizard_data`, not `w4os_wizard_data`)
- Engine components receive clean data contracts, not framework-specific structures
- Calling applications handle their own internal logic (migration vs update vs new)

## Naming Conventions
- Generic components: `Engine_*`, `OpenSim_*`, `engine_*`, `opensim_*`
- Helpers componoents: `Helpers_*`, `helpers_*`
- WordPress components: `W4OS_*`, `w4os_*`
- Session data: naming adapted to the target component (E.g. W4OS saves `wizard_data` because it's intended for the Wizard defined in Helpers and W4OS knows Helpers)

## Separation of Concerns
- **Engine**: library, Pure business logic, configuration management, data processing. only receives data and process it, never outputs result
- **Helpers**: API/library used by external apps and by W4OS, minimal web interface for standalone usage
- **WordPress**: Integration layer, handles only WP-specific features

## Data Contracts
- Pass only essential data between layers
- Use arrays with `values`, `return_url`, `timestamp`
- No framework metadata in generic components

Always apply these rules when suggesting code changes.
